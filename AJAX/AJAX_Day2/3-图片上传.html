<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <input type="file" class="choseImg">
  <img src="" alt="" width="100%">
  <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.2.0/axios.min.js"></script>


  <script>
    /* 
    目标:图片上传，显示到网页上
    1.获取图片文件
    2.使用 FormData 携带图片文件
    3.提交到服务器，获取图片ur1网址使用
     */
    document.querySelector('.choseImg').addEventListener('change', (e) => {
      // console.log(e);
      // console.log(e.target.files)
      // 获取文件的信息
      console.log(e.target.files[0])
      // 把图片文件添加到fn这个FormData()中
      const fn = new FormData()
      fn.append('img', e.target.files[0])
      console.log(fn);


      // 开始上传图片
      axios({
        url: 'http://hmajax.itheima.net/api/uploadimg',
        method: 'POST',
        // 注意这里要用data，而不是body
        data: fn
      }).then((result) => {
        // 上传后显示在网页中
        // console.log(result.data.data.url)
        document.querySelector('img').src = result.data.data.url

      })

    })
  </script>
</body>

</html>